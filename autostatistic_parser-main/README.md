# Автостатистик. Парсер данных автомобилей с сайтов-агрегаторов
Часть приложения для сбора и анализа данных по автомобялям. Модуль отвечает за сбор и актуализацию данных предложений с сайтов-агрегаторов. На текущий момент подключен сервис auto.ru.
____
Структура проекта:  

`modules` – вспомогательные приложения. Ключевой компанент здесь – selenium_driver – организует работу приложения Selenium. Через него происходит сбор данных. Этот компонент имитирует заход на сайт с реального браузера.  
`webdrivers` – файлы драйверов для Selenium.  
`configs` – базовые настройки для различных модулей, используемые прокси и доступы к ним.  
`auto_ru` – компонент, который отвечает за работу с сайтом auto.ru – подробности – далее.  
`bash` – набор сценариев для crontab.  
`checks` – набор сценариев с различными проверками. Например, скрипт offers_check_sold.py – он проверяем предложения со статусом «Продан», и если предложение меняет статус – вносит изменения в базу данных.  
`clean_up` – вспомогательные сценарии для чистки базы при возникновении проблем с некорректными данным или ошибками при разработке сценариев сбора.  
`gulp` – модули автоматизации для gulp.  
`notes` – заметки.  
`service` – вспомогательные срипты. Например, export_offers.py, – скрипты экспорта, которые используется для отправки выгрузки данных на электронную почту.  
`tests` – различные тесты. Например, тест на работоспособность прокси.  
`utils` – вспомогательные утилиты, что используются в других модулях приложения.  

## Настройка проекта
### Gulp
Для работы плагина синхронизации нужно установить следующие зависимости (`devDependencies`):  
- `gulp`.  
- `gulp-debug`.  
- `gulp-load-pluginsgulp-rsync`.  

Актуально уже для деплоя на «рабочую» машину.

### Python
В проекте используется версия python3.8. После настройки виртуального окружения (`venv`) нужно установить следующие модули:  
- `selenium`  
- `seleniumwire`  
- `bs4`  
- `pyvirtualdisplay`  

Для корректного подключения собственных модулей из директорий `modules`, `components`, `configs`, `utils`, `auto_ru` необходимо добавить файл по адресу `notes/python/module-pathes.pth` в деректорию `venv/lib/python3.8/site-packages`
### Конфигурации
Файл конфигурации нужно скопировать отсюда `notes/configs/platform_config.py` сюда `configs` поменяв соответсвующие настройки:  
- `PLATFORM` – платформа (`mac64` или `linux`)
- `DB_USER`
- `DB_PASSWORD`
- `DB_HOST`
- `DB_PORT`
- `DB_NAME`
### Структура базы данных
Для работы с текущим приложением необходимо создать базу данных (по умолчанию – `auto_ru_scrapper`) и добавить таблицы инструкциями из файла `notes/sql/init_tables.sql`.
## Краткое описание работы приложения сейчас
Подготовил видео с описанием работы приложения сейчас и возможных вариантов, как реализовать взаимодействие с сайтами-источниками данных. Видео доступно по ссылке: https://youtu.be/kIvkWa0JJ0s
